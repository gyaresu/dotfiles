{"_id":"trumpet","_rev":"94-c78dc412590e343c350ae33190a56af5","name":"trumpet","description":"parse and transform streaming html using css selectors","dist-tags":{"latest":"1.6.3"},"versions":{"0.0.0":{"name":"trumpet","version":"0.0.0","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.0.0","engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.0.106","_nodeVersion":"v0.4.12","_defaultsLoaded":true,"dist":{"shasum":"5d1e67986a5cf165c121114df31c4fff3fa7ab65","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.0.0.tgz"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.1.0":{"name":"trumpet","version":"0.1.0","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.1.0","engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.0.106","_nodeVersion":"v0.4.12","_defaultsLoaded":true,"dist":{"shasum":"05bd763e588dabb8d8facaf7b00099e63a21cef6","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.1.0.tgz"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.1.1":{"name":"trumpet","version":"0.1.1","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.1.1","engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.0.106","_nodeVersion":"v0.4.12","_defaultsLoaded":true,"dist":{"shasum":"016836094228e4bf527544801b0aa6d4cedb8e94","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.1.1.tgz"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.2.0":{"name":"trumpet","version":"0.2.0","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.2.0","engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.0.106","_nodeVersion":"v0.4.12","_defaultsLoaded":true,"dist":{"shasum":"9104cf0c05d58ad4c7101ef91d5268acf0be74cc","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.2.0.tgz"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.2.1":{"name":"trumpet","version":"0.2.1","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.2.1","engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.0.106","_nodeVersion":"v0.4.12","_defaultsLoaded":true,"dist":{"shasum":"2b05a2d23138e51081505462c351bf0a30e2e708","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.2.1.tgz"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.2.2":{"name":"trumpet","version":"0.2.2","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.2.2","engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.0.106","_nodeVersion":"v0.4.12","_defaultsLoaded":true,"dist":{"shasum":"59bd24b6bc903bdfb8623154280680fb2c93a3b1","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.2.2.tgz"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.2.3":{"name":"trumpet","version":"0.2.3","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.2.3","engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.0.106","_nodeVersion":"v0.4.12","_defaultsLoaded":true,"dist":{"shasum":"90521d2908f08be7287c637e30af20b6f41e188b","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.2.3.tgz"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.2.4":{"name":"trumpet","version":"0.2.4","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.2.4","engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.0.106","_nodeVersion":"v0.4.12","_defaultsLoaded":true,"dist":{"shasum":"2c6296be68ba22c9f3e8ccd72bf347e908848ffb","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.2.4.tgz"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.2.5":{"name":"trumpet","version":"0.2.5","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.2.5","optionalDependencies":{},"engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.1.19","_nodeVersion":"v0.6.11","_defaultsLoaded":true,"dist":{"shasum":"f8fc7bb092e2c30004b575f93f859bc5db34eca4","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.2.5.tgz"},"readme":"","maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.2.6":{"name":"trumpet","version":"0.2.6","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.2.6","optionalDependencies":{},"engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.1.19","_nodeVersion":"v0.6.11","_defaultsLoaded":true,"dist":{"shasum":"2261931afd6e3e622250114bf9faa690f75fa308","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.2.6.tgz"},"readme":"","maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.2.7":{"name":"trumpet","version":"0.2.7","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.2.7","optionalDependencies":{},"engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.1.19","_nodeVersion":"v0.6.11","_defaultsLoaded":true,"dist":{"shasum":"e7432e3ce171aab5886d4ca4b5bbbc08e6f2cf80","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.2.7.tgz"},"readme":"","maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.3.0":{"name":"trumpet","version":"0.3.0","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"git://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"_npmUser":{"name":"substack","email":"mail@substack.net"},"_id":"trumpet@0.3.0","optionalDependencies":{},"engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.1.19","_nodeVersion":"v0.6.11","_defaultsLoaded":true,"dist":{"shasum":"8596619444e1d003f1d238d3bca42d7fc2bd153c","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.3.0.tgz"},"readme":"","maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.3.1":{"name":"trumpet","version":"0.3.1","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"readme":"trumpet\n=======\n\nParse and transform streaming html using css selectors.\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\nexample\n=======\n\nselect\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.select('.b span', function (node) {\n    node.html(function (html) {\n        console.log(node.name + ': ' + html);\n    });\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/select.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/select.js \nspan: tacos\nspan: y\nspan: burritos\n```\n\nupdate\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n \ntr.update('.b span', function (html, node) {\n    return html.toUpperCase();\n});\n\ntr.update('.c', '---');\ntr.remove('.d');\ntr.remove('.e');\n\nvar fs = require('fs');\ntr.pipe(process.stdout, { end : false });\nfs.createReadStream(__dirname + '/update.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">\n        <span>beep</span>\n        <span>boop</span>\n    </div>\n    \n    <div class=\"d\">\n        <span>x</span>\n        <span>y</span>\n    </div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/update.js\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>TACOS</span>\n      <span>Y</span>\n      <span>BURRITOS</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">---</div>\n    \n    \n  </body>\n</html>\n```\n\nmethods\n=======\n\n``` js\nvar trumpet = require('trumpet')\n```\n\nvar tr = trumpet(opts)\n----------------------\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\nBy default, trumpet uses this list of\n[self-closing tags](http://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b):\n\n``` js\n[ 'area', 'base', 'basefont', 'br', 'col', 'hr', 'input', 'img', 'link', 'meta' ]\n```\n\nYou can specify a custom list by setting `opts.special`.\n\ntr.select(selector, fn)\n-----------------------\n\nFire `fn(node)` for every element in the html stream that matches the css\n`selector`.\n\nThe nodes are described in the nodes section of this document.\n\ntr.update(selector, fn)\n-----------------------\n\nCalls `node.update(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\nTo update attributes you'll need to use the long-form of calling `tr.select()`\nthen `node.update(fn, attrs)` inside the callback.\n\ntr.replace(selector, fn)\n------------------------\n\nCalls `node.replace(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\ntr.remove(selector, fn)\n-----------------------\n\nCalls `node.remove()` on nodes that match the `selector`.\n\nIf `fn` is provided, it will be called after an element is removed.\n\nnodes\n=====\n\nnode.name\n---------\n\nThe name of the html element node, such as `'div'` or `'span'`.\n\nnode.attributes\n---------------\n\nAn object with all the html attributes.\n\nFor example,\n\n``` html\n<img src=\"/beep.png\" width=\"32\" height=\"32\">\n```\n\nhas an attribute object of:\n\n``` js\n{ src : 'beep.png', width : '32', height : '32' }\n```\n\nnode.html(cb)\n-------------\n\nGet the inner text and html for the element, which may not have arrived yet.\n\n`cb(text)` fires when the inner contents are ready.\n\nnode.update(cb, attr), node.update(html, attr)\n----------------------------------------------\n\nReplace the node's inner contents with the string `html` or the string return\nvalue from `cb(html)`.\n\nIf `attr` is specified, these will be used in the output stream as the new tag\nattributes instead of `node.attributes`.\n\nnode.replace(cb), node.replace(html)\n------------------------------------\n\nReplace the node's outer content with the string `html` or the return value from\n`cb(html)`. The `html` passed to `cb` will be the outer contents.\n\nnode.remove()\n-------------\n\nRemove a node from the output stream.\n\nselector syntax\n===============\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n\ninstall\n=======\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\nlicense\n=======\n\nMIT/X11\n","_id":"trumpet@0.3.1","dist":{"shasum":"0f7b09a76221f9a21f18ec19a057d73ea4b7dbe2","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.3.1.tgz"},"_npmVersion":"1.1.59","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.3.2":{"name":"trumpet","version":"0.3.2","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"readme":"trumpet\n=======\n\nParse and transform streaming html using css selectors.\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\nexample\n=======\n\nselect\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.select('.b span', function (node) {\n    node.html(function (html) {\n        console.log(node.name + ': ' + html);\n    });\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/select.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/select.js \nspan: tacos\nspan: y\nspan: burritos\n```\n\nupdate\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n \ntr.update('.b span', function (html, node) {\n    return html.toUpperCase();\n});\n\ntr.update('.c', '---');\ntr.remove('.d');\ntr.remove('.e');\n\nvar fs = require('fs');\ntr.pipe(process.stdout, { end : false });\nfs.createReadStream(__dirname + '/update.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">\n        <span>beep</span>\n        <span>boop</span>\n    </div>\n    \n    <div class=\"d\">\n        <span>x</span>\n        <span>y</span>\n    </div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/update.js\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>TACOS</span>\n      <span>Y</span>\n      <span>BURRITOS</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">---</div>\n    \n    \n  </body>\n</html>\n```\n\nmethods\n=======\n\n``` js\nvar trumpet = require('trumpet')\n```\n\nvar tr = trumpet(opts)\n----------------------\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\nBy default, trumpet uses this list of\n[self-closing tags](http://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b):\n\n``` js\n[ 'area', 'base', 'basefont', 'br', 'col', 'hr', 'input', 'img', 'link', 'meta' ]\n```\n\nYou can specify a custom list by setting `opts.special`.\n\ntr.select(selector, fn)\n-----------------------\n\nFire `fn(node)` for every element in the html stream that matches the css\n`selector`.\n\nThe nodes are described in the nodes section of this document.\n\ntr.update(selector, fn)\n-----------------------\n\nCalls `node.update(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\nTo update attributes you'll need to use the long-form of calling `tr.select()`\nthen `node.update(fn, attrs)` inside the callback.\n\ntr.replace(selector, fn)\n------------------------\n\nCalls `node.replace(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\ntr.remove(selector, fn)\n-----------------------\n\nCalls `node.remove()` on nodes that match the `selector`.\n\nIf `fn` is provided, it will be called after an element is removed.\n\nnodes\n=====\n\nnode.name\n---------\n\nThe name of the html element node, such as `'div'` or `'span'`.\n\nnode.attributes\n---------------\n\nAn object with all the html attributes.\n\nFor example,\n\n``` html\n<img src=\"/beep.png\" width=\"32\" height=\"32\">\n```\n\nhas an attribute object of:\n\n``` js\n{ src : 'beep.png', width : '32', height : '32' }\n```\n\nnode.html(cb)\n-------------\n\nGet the inner text and html for the element, which may not have arrived yet.\n\n`cb(text)` fires when the inner contents are ready.\n\nnode.update(cb, attr), node.update(html, attr)\n----------------------------------------------\n\nReplace the node's inner contents with the string `html` or the string return\nvalue from `cb(html)`.\n\nIf `attr` is specified, these will be used in the output stream as the new tag\nattributes instead of `node.attributes`.\n\nnode.replace(cb), node.replace(html)\n------------------------------------\n\nReplace the node's outer content with the string `html` or the return value from\n`cb(html)`. The `html` passed to `cb` will be the outer contents.\n\nnode.remove()\n-------------\n\nRemove a node from the output stream.\n\nselector syntax\n===============\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n\ninstall\n=======\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\nlicense\n=======\n\nMIT/X11\n","readmeFilename":"README.markdown","_id":"trumpet@0.3.2","dist":{"shasum":"afcc16a0e0bcf5d3f2b0a504a0de085d587b13fd","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.3.2.tgz"},"_from":".","_npmVersion":"1.2.18","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.3.3":{"name":"trumpet","version":"0.3.3","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"readme":"trumpet\n=======\n\nParse and transform streaming html using css selectors.\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\nexample\n=======\n\nselect\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.select('.b span', function (node) {\n    node.html(function (html) {\n        console.log(node.name + ': ' + html);\n    });\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/select.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/select.js \nspan: tacos\nspan: y\nspan: burritos\n```\n\nupdate\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n \ntr.update('.b span', function (html, node) {\n    return html.toUpperCase();\n});\n\ntr.update('.c', '---');\ntr.remove('.d');\ntr.remove('.e');\n\nvar fs = require('fs');\ntr.pipe(process.stdout, { end : false });\nfs.createReadStream(__dirname + '/update.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">\n        <span>beep</span>\n        <span>boop</span>\n    </div>\n    \n    <div class=\"d\">\n        <span>x</span>\n        <span>y</span>\n    </div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/update.js\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>TACOS</span>\n      <span>Y</span>\n      <span>BURRITOS</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">---</div>\n    \n    \n  </body>\n</html>\n```\n\nmethods\n=======\n\n``` js\nvar trumpet = require('trumpet')\n```\n\nvar tr = trumpet(opts)\n----------------------\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\nBy default, trumpet uses this list of\n[self-closing tags](http://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b):\n\n``` js\n[ 'area', 'base', 'basefont', 'br', 'col', 'hr', 'input', 'img', 'link', 'meta' ]\n```\n\nYou can specify a custom list by setting `opts.special`.\n\ntr.select(selector, fn)\n-----------------------\n\nFire `fn(node)` for every element in the html stream that matches the css\n`selector`.\n\nThe nodes are described in the nodes section of this document.\n\ntr.update(selector, fn)\n-----------------------\n\nCalls `node.update(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\nTo update attributes you'll need to use the long-form of calling `tr.select()`\nthen `node.update(fn, attrs)` inside the callback.\n\ntr.replace(selector, fn)\n------------------------\n\nCalls `node.replace(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\ntr.remove(selector, fn)\n-----------------------\n\nCalls `node.remove()` on nodes that match the `selector`.\n\nIf `fn` is provided, it will be called after an element is removed.\n\nnodes\n=====\n\nnode.name\n---------\n\nThe name of the html element node, such as `'div'` or `'span'`.\n\nnode.attributes\n---------------\n\nAn object with all the html attributes.\n\nFor example,\n\n``` html\n<img src=\"/beep.png\" width=\"32\" height=\"32\">\n```\n\nhas an attribute object of:\n\n``` js\n{ src : 'beep.png', width : '32', height : '32' }\n```\n\nnode.html(cb)\n-------------\n\nGet the inner text and html for the element, which may not have arrived yet.\n\n`cb(text)` fires when the inner contents are ready.\n\nnode.update(cb, attr), node.update(html, attr)\n----------------------------------------------\n\nReplace the node's inner contents with the string `html` or the string return\nvalue from `cb(html)`.\n\nIf `attr` is specified, these will be used in the output stream as the new tag\nattributes instead of `node.attributes`.\n\nnode.replace(cb), node.replace(html)\n------------------------------------\n\nReplace the node's outer content with the string `html` or the return value from\n`cb(html)`. The `html` passed to `cb` will be the outer contents.\n\nnode.remove()\n-------------\n\nRemove a node from the output stream.\n\nselector syntax\n===============\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n\ninstall\n=======\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\nlicense\n=======\n\nMIT/X11\n","readmeFilename":"README.markdown","_id":"trumpet@0.3.3","dist":{"shasum":"1c081e134b6408f58f6dff8af0d504f60863f087","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.3.3.tgz"},"_from":".","_npmVersion":"1.2.18","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.3.4":{"name":"trumpet","version":"0.3.4","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4"},"devDependencies":{"tap":"~0.2.3"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"readme":"trumpet\n=======\n\nParse and transform streaming html using css selectors.\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\nexample\n=======\n\nselect\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.select('.b span', function (node) {\n    node.html(function (html) {\n        console.log(node.name + ': ' + html);\n    });\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/select.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/select.js \nspan: tacos\nspan: y\nspan: burritos\n```\n\nupdate\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n \ntr.update('.b span', function (html, node) {\n    return html.toUpperCase();\n});\n\ntr.update('.c', '---');\ntr.remove('.d');\ntr.remove('.e');\n\nvar fs = require('fs');\ntr.pipe(process.stdout, { end : false });\nfs.createReadStream(__dirname + '/update.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">\n        <span>beep</span>\n        <span>boop</span>\n    </div>\n    \n    <div class=\"d\">\n        <span>x</span>\n        <span>y</span>\n    </div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/update.js\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>TACOS</span>\n      <span>Y</span>\n      <span>BURRITOS</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">---</div>\n    \n    \n  </body>\n</html>\n```\n\nmethods\n=======\n\n``` js\nvar trumpet = require('trumpet')\n```\n\nvar tr = trumpet(opts)\n----------------------\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\nBy default, trumpet uses this list of\n[self-closing tags](http://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b):\n\n``` js\n[ 'area', 'base', 'basefont', 'br', 'col', 'hr', 'input', 'img', 'link', 'meta' ]\n```\n\nYou can specify a custom list by setting `opts.special`.\n\ntr.select(selector, fn)\n-----------------------\n\nFire `fn(node)` for every element in the html stream that matches the css\n`selector`.\n\nThe nodes are described in the nodes section of this document.\n\ntr.update(selector, fn)\n-----------------------\n\nCalls `node.update(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\nTo update attributes you'll need to use the long-form of calling `tr.select()`\nthen `node.update(fn, attrs)` inside the callback.\n\ntr.replace(selector, fn)\n------------------------\n\nCalls `node.replace(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\ntr.remove(selector, fn)\n-----------------------\n\nCalls `node.remove()` on nodes that match the `selector`.\n\nIf `fn` is provided, it will be called after an element is removed.\n\nnodes\n=====\n\nnode.name\n---------\n\nThe name of the html element node, such as `'div'` or `'span'`.\n\nnode.attributes\n---------------\n\nAn object with all the html attributes.\n\nFor example,\n\n``` html\n<img src=\"/beep.png\" width=\"32\" height=\"32\">\n```\n\nhas an attribute object of:\n\n``` js\n{ src : 'beep.png', width : '32', height : '32' }\n```\n\nnode.html(cb)\n-------------\n\nGet the inner text and html for the element, which may not have arrived yet.\n\n`cb(text)` fires when the inner contents are ready.\n\nnode.update(cb, attr), node.update(html, attr)\n----------------------------------------------\n\nReplace the node's inner contents with the string `html` or the string return\nvalue from `cb(html)`.\n\nIf `attr` is specified, these will be used in the output stream as the new tag\nattributes instead of `node.attributes`.\n\nnode.replace(cb), node.replace(html)\n------------------------------------\n\nReplace the node's outer content with the string `html` or the return value from\n`cb(html)`. The `html` passed to `cb` will be the outer contents.\n\nnode.remove()\n-------------\n\nRemove a node from the output stream.\n\nselector syntax\n===============\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n\ninstall\n=======\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\nlicense\n=======\n\nMIT/X11\n","readmeFilename":"README.markdown","_id":"trumpet@0.3.4","dist":{"shasum":"e674bd8ed077aa7a870dc2cb936d0658c3fbf7d3","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.3.4.tgz"},"_from":".","_npmVersion":"1.2.2","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.3.5":{"name":"trumpet","version":"0.3.5","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4","through":"~2.3.4"},"devDependencies":{"tap":"~0.4.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"readme":"trumpet\n=======\n\nParse and transform streaming html using css selectors.\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\nexample\n=======\n\nselect\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.select('.b span', function (node) {\n    node.html(function (html) {\n        console.log(node.name + ': ' + html);\n    });\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/select.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/select.js \nspan: tacos\nspan: y\nspan: burritos\n```\n\nupdate\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n \ntr.update('.b span', function (html, node) {\n    return html.toUpperCase();\n});\n\ntr.update('.c', '---');\ntr.remove('.d');\ntr.remove('.e');\n\nvar fs = require('fs');\ntr.pipe(process.stdout, { end : false });\nfs.createReadStream(__dirname + '/update.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">\n        <span>beep</span>\n        <span>boop</span>\n    </div>\n    \n    <div class=\"d\">\n        <span>x</span>\n        <span>y</span>\n    </div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/update.js\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>TACOS</span>\n      <span>Y</span>\n      <span>BURRITOS</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">---</div>\n    \n    \n  </body>\n</html>\n```\n\nmethods\n=======\n\n``` js\nvar trumpet = require('trumpet')\n```\n\nvar tr = trumpet(opts)\n----------------------\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\nBy default, trumpet uses this list of\n[self-closing tags](http://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b):\n\n``` js\n[ 'area', 'base', 'basefont', 'br', 'col', 'hr', 'input', 'img', 'link', 'meta' ]\n```\n\nYou can specify a custom list by setting `opts.special`.\n\ntr.select(selector, fn)\n-----------------------\n\nFire `fn(node)` for every element in the html stream that matches the css\n`selector`.\n\nThe nodes are described in the nodes section of this document.\n\ntr.update(selector, fn)\n-----------------------\n\nCalls `node.update(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\nTo update attributes you'll need to use the long-form of calling `tr.select()`\nthen `node.update(fn, attrs)` inside the callback.\n\ntr.replace(selector, fn)\n------------------------\n\nCalls `node.replace(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\ntr.remove(selector, fn)\n-----------------------\n\nCalls `node.remove()` on nodes that match the `selector`.\n\nIf `fn` is provided, it will be called after an element is removed.\n\nnodes\n=====\n\nnode.name\n---------\n\nThe name of the html element node, such as `'div'` or `'span'`.\n\nnode.attributes\n---------------\n\nAn object with all the html attributes.\n\nFor example,\n\n``` html\n<img src=\"/beep.png\" width=\"32\" height=\"32\">\n```\n\nhas an attribute object of:\n\n``` js\n{ src : 'beep.png', width : '32', height : '32' }\n```\n\nnode.html(cb)\n-------------\n\nGet the inner text and html for the element, which may not have arrived yet.\n\n`cb(text)` fires when the inner contents are ready.\n\nnode.update(cb, attr), node.update(html, attr)\n----------------------------------------------\n\nReplace the node's inner contents with the string `html` or the string return\nvalue from `cb(html)`.\n\nIf `attr` is specified, these will be used in the output stream as the new tag\nattributes instead of `node.attributes`.\n\nnode.replace(cb), node.replace(html)\n------------------------------------\n\nReplace the node's outer content with the string `html` or the return value from\n`cb(html)`. The `html` passed to `cb` will be the outer contents.\n\nnode.remove()\n-------------\n\nRemove a node from the output stream.\n\nselector syntax\n===============\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n\ninstall\n=======\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\nlicense\n=======\n\nMIT/X11\n","readmeFilename":"README.markdown","_id":"trumpet@0.3.5","dist":{"shasum":"7e064862c73eefbceba1b5f0170de0e931c003a2","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.3.5.tgz"},"_from":".","_npmVersion":"1.2.2","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.3.6":{"name":"trumpet","version":"0.3.6","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4","through":"~2.3.4"},"devDependencies":{"tap":"~0.4.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"readme":"trumpet\n=======\n\nParse and transform streaming html using css selectors.\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\nexample\n=======\n\nselect\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.select('.b span', function (node) {\n    node.html(function (html) {\n        console.log(node.name + ': ' + html);\n    });\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/select.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/select.js \nspan: tacos\nspan: y\nspan: burritos\n```\n\nupdate\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n \ntr.update('.b span', function (html, node) {\n    return html.toUpperCase();\n});\n\ntr.update('.c', '---');\ntr.remove('.d');\ntr.remove('.e');\n\nvar fs = require('fs');\ntr.pipe(process.stdout, { end : false });\nfs.createReadStream(__dirname + '/update.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">\n        <span>beep</span>\n        <span>boop</span>\n    </div>\n    \n    <div class=\"d\">\n        <span>x</span>\n        <span>y</span>\n    </div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/update.js\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>TACOS</span>\n      <span>Y</span>\n      <span>BURRITOS</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">---</div>\n    \n    \n  </body>\n</html>\n```\n\nmethods\n=======\n\n``` js\nvar trumpet = require('trumpet')\n```\n\nvar tr = trumpet(opts)\n----------------------\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\nBy default, trumpet uses this list of\n[self-closing tags](http://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b):\n\n``` js\n[ 'area', 'base', 'basefont', 'br', 'col', 'hr', 'input', 'img', 'link', 'meta' ]\n```\n\nYou can specify a custom list by setting `opts.special`.\n\ntr.select(selector, fn)\n-----------------------\n\nFire `fn(node)` for every element in the html stream that matches the css\n`selector`.\n\nThe nodes are described in the nodes section of this document.\n\ntr.update(selector, fn)\n-----------------------\n\nCalls `node.update(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\nTo update attributes you'll need to use the long-form of calling `tr.select()`\nthen `node.update(fn, attrs)` inside the callback.\n\ntr.replace(selector, fn)\n------------------------\n\nCalls `node.replace(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\ntr.remove(selector, fn)\n-----------------------\n\nCalls `node.remove()` on nodes that match the `selector`.\n\nIf `fn` is provided, it will be called after an element is removed.\n\nnodes\n=====\n\nnode.name\n---------\n\nThe name of the html element node, such as `'div'` or `'span'`.\n\nnode.attributes\n---------------\n\nAn object with all the html attributes.\n\nFor example,\n\n``` html\n<img src=\"/beep.png\" width=\"32\" height=\"32\">\n```\n\nhas an attribute object of:\n\n``` js\n{ src : 'beep.png', width : '32', height : '32' }\n```\n\nnode.html(cb)\n-------------\n\nGet the inner text and html for the element, which may not have arrived yet.\n\n`cb(text)` fires when the inner contents are ready.\n\nnode.update(cb, attr), node.update(html, attr)\n----------------------------------------------\n\nReplace the node's inner contents with the string `html` or the string return\nvalue from `cb(html)`.\n\nIf `attr` is specified, these will be used in the output stream as the new tag\nattributes instead of `node.attributes`.\n\nnode.replace(cb), node.replace(html)\n------------------------------------\n\nReplace the node's outer content with the string `html` or the return value from\n`cb(html)`. The `html` passed to `cb` will be the outer contents.\n\nnode.remove()\n-------------\n\nRemove a node from the output stream.\n\nselector syntax\n===============\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n\ninstall\n=======\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\nlicense\n=======\n\nMIT/X11\n","readmeFilename":"README.markdown","_id":"trumpet@0.3.6","dist":{"shasum":"27b4e63311a35125b84343c582115855f373f493","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.3.6.tgz"},"_from":".","_npmVersion":"1.2.2","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.4.0":{"name":"trumpet","version":"0.4.0","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4","through":"~2.3.4"},"devDependencies":{"tap":"~0.4.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"readme":"trumpet\n=======\n\nParse and transform streaming html using css selectors.\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\nexample\n=======\n\nselect\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.select('.b span', function (node) {\n    node.html(function (html) {\n        console.log(node.name + ': ' + html);\n    });\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/select.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/select.js \nspan: tacos\nspan: y\nspan: burritos\n```\n\nupdate\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n \ntr.update('.b span', function (html, node) {\n    return html.toUpperCase();\n});\n\ntr.update('.c', '---');\ntr.remove('.d');\ntr.remove('.e');\n\nvar fs = require('fs');\ntr.pipe(process.stdout, { end : false });\nfs.createReadStream(__dirname + '/update.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">\n        <span>beep</span>\n        <span>boop</span>\n    </div>\n    \n    <div class=\"d\">\n        <span>x</span>\n        <span>y</span>\n    </div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/update.js\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>TACOS</span>\n      <span>Y</span>\n      <span>BURRITOS</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">---</div>\n    \n    \n  </body>\n</html>\n```\n\nmethods\n=======\n\n``` js\nvar trumpet = require('trumpet')\n```\n\nvar tr = trumpet(opts)\n----------------------\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\nBy default, trumpet uses this list of\n[self-closing tags](http://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b):\n\n``` js\n[ 'area', 'base', 'basefont', 'br', 'col', 'hr', 'input', 'img', 'link', 'meta' ]\n```\n\nYou can specify a custom list by setting `opts.special`.\n\ntr.select(selector, fn)\n-----------------------\n\nFire `fn(node)` for every element in the html stream that matches the css\n`selector`.\n\nThe nodes are described in the nodes section of this document.\n\ntr.update(selector, fn)\n-----------------------\n\nCalls `node.update(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\nTo update attributes you'll need to use the long-form of calling `tr.select()`\nthen `node.update(fn, attrs)` inside the callback.\n\ntr.replace(selector, fn)\n------------------------\n\nCalls `node.replace(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\ntr.remove(selector, fn)\n-----------------------\n\nCalls `node.remove()` on nodes that match the `selector`.\n\nIf `fn` is provided, it will be called after an element is removed.\n\nnodes\n=====\n\nnode.name\n---------\n\nThe name of the html element node, such as `'div'` or `'span'`.\n\nnode.attributes\n---------------\n\nAn object with all the html attributes.\n\nFor example,\n\n``` html\n<img src=\"/beep.png\" width=\"32\" height=\"32\">\n```\n\nhas an attribute object of:\n\n``` js\n{ src : 'beep.png', width : '32', height : '32' }\n```\n\nnode.html(cb)\n-------------\n\nGet the inner text and html for the element, which may not have arrived yet.\n\n`cb(text)` fires when the inner contents are ready.\n\nnode.update(cb, attr), node.update(html, attr)\n----------------------------------------------\n\nReplace the node's inner contents with the string `html` or the string return\nvalue from `cb(html)`.\n\nIf `attr` is specified, these will be used in the output stream as the new tag\nattributes instead of `node.attributes`.\n\nnode.replace(cb), node.replace(html)\n------------------------------------\n\nReplace the node's outer content with the string `html` or the return value from\n`cb(html)`. The `html` passed to `cb` will be the outer contents.\n\nnode.remove()\n-------------\n\nRemove a node from the output stream.\n\nselector syntax\n===============\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\ninstall\n=======\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\nlicense\n=======\n\nMIT/X11\n","readmeFilename":"README.markdown","_id":"trumpet@0.4.0","dist":{"shasum":"e73aaa3c95a3a3b8044ca20dcd2ff0903d62191a","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.4.0.tgz"},"_from":".","_npmVersion":"1.2.2","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.4.1":{"name":"trumpet","version":"0.4.1","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4","through":"~2.3.4"},"devDependencies":{"tap":"~0.4.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"readme":"trumpet\n=======\n\nParse and transform streaming html using css selectors.\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\nexample\n=======\n\nselect\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.select('.b span', function (node) {\n    node.html(function (html) {\n        console.log(node.name + ': ' + html);\n    });\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/select.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/select.js \nspan: tacos\nspan: y\nspan: burritos\n```\n\nupdate\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n \ntr.update('.b span', function (html, node) {\n    return html.toUpperCase();\n});\n\ntr.update('.c', '---');\ntr.remove('.d');\ntr.remove('.e');\n\nvar fs = require('fs');\ntr.pipe(process.stdout, { end : false });\nfs.createReadStream(__dirname + '/update.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">\n        <span>beep</span>\n        <span>boop</span>\n    </div>\n    \n    <div class=\"d\">\n        <span>x</span>\n        <span>y</span>\n    </div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/update.js\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>TACOS</span>\n      <span>Y</span>\n      <span>BURRITOS</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">---</div>\n    \n    \n  </body>\n</html>\n```\n\nmethods\n=======\n\n``` js\nvar trumpet = require('trumpet')\n```\n\nvar tr = trumpet(opts)\n----------------------\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\nBy default, trumpet uses this list of\n[self-closing tags](http://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b):\n\n``` js\n[ 'area', 'base', 'basefont', 'br', 'col', 'hr', 'input', 'img', 'link', 'meta' ]\n```\n\nYou can specify a custom list by setting `opts.special`.\n\ntr.select(selector, fn)\n-----------------------\n\nFire `fn(node)` for every element in the html stream that matches the css\n`selector`.\n\nThe nodes are described in the nodes section of this document.\n\ntr.update(selector, fn)\n-----------------------\n\nCalls `node.update(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\nTo update attributes you'll need to use the long-form of calling `tr.select()`\nthen `node.update(fn, attrs)` inside the callback.\n\ntr.replace(selector, fn)\n------------------------\n\nCalls `node.replace(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\ntr.remove(selector, fn)\n-----------------------\n\nCalls `node.remove()` on nodes that match the `selector`.\n\nIf `fn` is provided, it will be called after an element is removed.\n\nnodes\n=====\n\nnode.name\n---------\n\nThe name of the html element node, such as `'div'` or `'span'`.\n\nnode.attributes\n---------------\n\nAn object with all the html attributes.\n\nFor example,\n\n``` html\n<img src=\"/beep.png\" width=\"32\" height=\"32\">\n```\n\nhas an attribute object of:\n\n``` js\n{ src : 'beep.png', width : '32', height : '32' }\n```\n\nnode.html(cb)\n-------------\n\nGet the inner text and html for the element, which may not have arrived yet.\n\n`cb(text)` fires when the inner contents are ready.\n\nnode.update(cb, attr), node.update(html, attr)\n----------------------------------------------\n\nReplace the node's inner contents with the string `html` or the string return\nvalue from `cb(html)`.\n\nIf `attr` is specified, these will be used in the output stream as the new tag\nattributes instead of `node.attributes`.\n\nnode.replace(cb), node.replace(html)\n------------------------------------\n\nReplace the node's outer content with the string `html` or the return value from\n`cb(html)`. The `html` passed to `cb` will be the outer contents.\n\nnode.remove()\n-------------\n\nRemove a node from the output stream.\n\nselector syntax\n===============\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\ninstall\n=======\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\nlicense\n=======\n\nMIT/X11\n","readmeFilename":"README.markdown","_id":"trumpet@0.4.1","dist":{"shasum":"24bba18a459de3e85092fd0a7a7c89676573ac10","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.4.1.tgz"},"_npmVersion":"1.1.71","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"0.4.2":{"name":"trumpet","version":"0.4.2","description":"parse and transform streaming html using css selectors","main":"index.js","directories":{"lib":".","example":"example","test":"test"},"dependencies":{"sax":"~0.3.5","ent":"~0.0.4","through":"~2.3.4"},"devDependencies":{"tap":"~0.4.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT/X11","engine":{"node":">=0.4"},"readme":"trumpet\n=======\n\nParse and transform streaming html using css selectors.\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\nexample\n=======\n\nselect\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.select('.b span', function (node) {\n    node.html(function (html) {\n        console.log(node.name + ': ' + html);\n    });\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/select.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/select.js \nspan: tacos\nspan: y\nspan: burritos\n```\n\nupdate\n------\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n \ntr.update('.b span', function (html, node) {\n    return html.toUpperCase();\n});\n\ntr.update('.c', '---');\ntr.remove('.d');\ntr.remove('.e');\n\nvar fs = require('fs');\ntr.pipe(process.stdout, { end : false });\nfs.createReadStream(__dirname + '/update.html').pipe(tr);\n```\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span>y</span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">\n        <span>beep</span>\n        <span>boop</span>\n    </div>\n    \n    <div class=\"d\">\n        <span>x</span>\n        <span>y</span>\n    </div>\n  </body>\n</html>\n```\n\noutput:\n\n```\n$ node example/update.js\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>TACOS</span>\n      <span>Y</span>\n      <span>BURRITOS</span>\n    </div>\n    <div class=\"a\">!!!</div>\n    \n    <div class=\"c\">---</div>\n    \n    \n  </body>\n</html>\n```\n\nmethods\n=======\n\n``` js\nvar trumpet = require('trumpet')\n```\n\nvar tr = trumpet(opts)\n----------------------\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\nBy default, trumpet uses this list of\n[self-closing tags](http://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b):\n\n``` js\n[ 'area', 'base', 'basefont', 'br', 'col', 'hr', 'input', 'img', 'link', 'meta' ]\n```\n\nYou can specify a custom list by setting `opts.special`.\n\ntr.select(selector, fn)\n-----------------------\n\nFire `fn(node)` for every element in the html stream that matches the css\n`selector`.\n\nThe nodes are described in the nodes section of this document.\n\ntr.update(selector, fn)\n-----------------------\n\nCalls `node.update(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\nTo update attributes you'll need to use the long-form of calling `tr.select()`\nthen `node.update(fn, attrs)` inside the callback.\n\ntr.replace(selector, fn)\n------------------------\n\nCalls `node.replace(fn)` on the nodes that match the `selector`\nexcept that `fn` gets the `node` as a second argument.\n\ntr.remove(selector, fn)\n-----------------------\n\nCalls `node.remove()` on nodes that match the `selector`.\n\nIf `fn` is provided, it will be called after an element is removed.\n\nnodes\n=====\n\nnode.name\n---------\n\nThe name of the html element node, such as `'div'` or `'span'`.\n\nnode.attributes\n---------------\n\nAn object with all the html attributes.\n\nFor example,\n\n``` html\n<img src=\"/beep.png\" width=\"32\" height=\"32\">\n```\n\nhas an attribute object of:\n\n``` js\n{ src : 'beep.png', width : '32', height : '32' }\n```\n\nnode.html(cb)\n-------------\n\nGet the inner text and html for the element, which may not have arrived yet.\n\n`cb(text)` fires when the inner contents are ready.\n\nnode.update(cb, attr), node.update(html, attr)\n----------------------------------------------\n\nReplace the node's inner contents with the string `html` or the string return\nvalue from `cb(html)`.\n\nIf `attr` is specified, these will be used in the output stream as the new tag\nattributes instead of `node.attributes`.\n\nnode.replace(cb), node.replace(html)\n------------------------------------\n\nReplace the node's outer content with the string `html` or the return value from\n`cb(html)`. The `html` passed to `cb` will be the outer contents.\n\nnode.remove()\n-------------\n\nRemove a node from the output stream.\n\nselector syntax\n===============\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\ninstall\n=======\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\nlicense\n=======\n\nMIT/X11\n","readmeFilename":"README.markdown","_id":"trumpet@0.4.2","dist":{"shasum":"8497a5b3c6c606e5268b45132cb999992be2c242","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-0.4.2.tgz"},"_npmVersion":"1.1.71","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}]},"1.0.0":{"name":"trumpet","version":"1.0.0","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\n## elem.createReadStream()\n\nCreate a new readable stream with the inner html content under `elem`.\n\n## elem.createWriteStream()\n\nCreate a new write stream to replace the inner html content under `elem`.\n\n## elem.createStream()\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","_id":"trumpet@1.0.0","dist":{"shasum":"f2e1ae93aa6db37bba3b5ba4b53823c5571f991d","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.0.0.tgz"},"_npmVersion":"1.1.71","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.1.0":{"name":"trumpet","version":"1.1.0","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.createReadStream()\n\nCreate a new readable stream with the inner html content under `elem`.\n\n## elem.createWriteStream()\n\nCreate a new write stream to replace the inner html content under `elem`.\n\n## elem.createStream()\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.1.0","dist":{"shasum":"40ba0efeb7ffae16c660afe7e3dcadc6163f865a","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.1.0.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.2.0":{"name":"trumpet","version":"1.2.0","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.createReadStream()\n\nCreate a new readable stream with the inner html content under `elem`.\n\n## elem.createWriteStream()\n\nCreate a new write stream to replace the inner html content under `elem`.\n\n## elem.createStream()\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.2.0","dist":{"shasum":"f38e6833e41c45000a6fc578c8f2a73073f35ea9","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.2.0.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.2.1":{"name":"trumpet","version":"1.2.1","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.createReadStream()\n\nCreate a new readable stream with the inner html content under `elem`.\n\n## elem.createWriteStream()\n\nCreate a new write stream to replace the inner html content under `elem`.\n\n## elem.createStream()\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.2.1","dist":{"shasum":"f07fba0107b757a3b61e4e880f1344853291edc1","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.2.1.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.2.2":{"name":"trumpet","version":"1.2.2","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.createReadStream()\n\nCreate a new readable stream with the inner html content under `elem`.\n\n## elem.createWriteStream()\n\nCreate a new write stream to replace the inner html content under `elem`.\n\n## elem.createStream()\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.2.2","dist":{"shasum":"3afb148e51f2a6df67e4233348ee00aecefa25e9","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.2.2.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.2.3":{"name":"trumpet","version":"1.2.3","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.createReadStream()\n\nCreate a new readable stream with the inner html content under `elem`.\n\n## elem.createWriteStream()\n\nCreate a new write stream to replace the inner html content under `elem`.\n\n## elem.createStream()\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.2.3","dist":{"shasum":"b0218f743be7773367eb2e3ff9cc6537ba316eea","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.2.3.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.3.0":{"name":"trumpet","version":"1.3.0","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream()\n\nCreate a new readable stream with the inner html content under `elem`.\n\n## elem.createWriteStream()\n\nCreate a new write stream to replace the inner html content under `elem`.\n\n## elem.createStream()\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.3.0","dist":{"shasum":"5a335240103f214487959c87d88d4f0061e84ab0","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.3.0.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.3.1":{"name":"trumpet","version":"1.3.1","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream()\n\nCreate a new readable stream with the inner html content under `elem`.\n\n## elem.createWriteStream()\n\nCreate a new write stream to replace the inner html content under `elem`.\n\n## elem.createStream()\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.3.1","dist":{"shasum":"959979fc812f184f28d7373dc9cc921686f3b275","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.3.1.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.4.0":{"name":"trumpet","version":"1.4.0","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.4.0","dist":{"shasum":"5d4b826b244c118ab35c0f738b014789b01b9e61","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.4.0.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.4.1":{"name":"trumpet","version":"1.4.1","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.4.1","dist":{"shasum":"7f462eb19931d9e64f980ca897d63f76bd39b823","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.4.1.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.5.0":{"name":"trumpet","version":"1.5.0","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## tr.createStream(sel, opts)\n\nShort-hand for `tr.select(sel).createStream(opts)`.\n\n## tr.createReadStream(sel, opts)\n\nShort-hand for `tr.select(sel).createReadStream(opts)`.\n\n## tr.createWriteStream(sel, opts)\n\nShort-hand for `tr.select(sel).createWriteStream(opts)`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.5.0","dist":{"shasum":"fc9517ac54217fa4d0d42c1d9e2574c793c9dbc1","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.5.0.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.5.1":{"name":"trumpet","version":"1.5.1","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## tr.createStream(sel, opts)\n\nShort-hand for `tr.select(sel).createStream(opts)`.\n\n## tr.createReadStream(sel, opts)\n\nShort-hand for `tr.select(sel).createReadStream(opts)`.\n\n## tr.createWriteStream(sel, opts)\n\nShort-hand for `tr.select(sel).createWriteStream(opts)`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.5.1","dist":{"shasum":"f982c6a19a08bbc7b416729eb9d1b97b16192860","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.5.1.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.5.2":{"name":"trumpet","version":"1.5.2","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## tr.createStream(sel, opts)\n\nShort-hand for `tr.select(sel).createStream(opts)`.\n\n## tr.createReadStream(sel, opts)\n\nShort-hand for `tr.select(sel).createReadStream(opts)`.\n\n## tr.createWriteStream(sel, opts)\n\nShort-hand for `tr.select(sel).createWriteStream(opts)`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.5.2","dist":{"shasum":"16075aad9191aa1c33bb75fd5afc561415eb86e1","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.5.2.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.5.3":{"name":"trumpet","version":"1.5.3","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## tr.createStream(sel, opts)\n\nShort-hand for `tr.select(sel).createStream(opts)`.\n\n## tr.createReadStream(sel, opts)\n\nShort-hand for `tr.select(sel).createReadStream(opts)`.\n\n## tr.createWriteStream(sel, opts)\n\nShort-hand for `tr.select(sel).createWriteStream(opts)`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.5.3","dist":{"shasum":"88f4c826c30e80aebf405a852dd54ab613423413","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.5.3.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.5.4":{"name":"trumpet","version":"1.5.4","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## tr.createStream(sel, opts)\n\nShort-hand for `tr.select(sel).createStream(opts)`.\n\n## tr.createReadStream(sel, opts)\n\nShort-hand for `tr.select(sel).createReadStream(opts)`.\n\n## tr.createWriteStream(sel, opts)\n\nShort-hand for `tr.select(sel).createWriteStream(opts)`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.5.4","dist":{"shasum":"8d636722b17502a37c8f6e3d5c5c7f1598770d96","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.5.4.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.5.5":{"name":"trumpet","version":"1.5.5","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## tr.createStream(sel, opts)\n\nShort-hand for `tr.select(sel).createStream(opts)`.\n\n## tr.createReadStream(sel, opts)\n\nShort-hand for `tr.select(sel).createReadStream(opts)`.\n\n## tr.createWriteStream(sel, opts)\n\nShort-hand for `tr.select(sel).createWriteStream(opts)`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n* E[attr~=search]\n* E[attr|=prefix]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.5.5","dist":{"shasum":"3182f713720c67b290995444c0e3bd43ef4baa85","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.5.5.tgz"},"_from":".","_npmVersion":"1.3.0","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.5.6":{"name":"trumpet","version":"1.5.6","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## tr.createStream(sel, opts)\n\nShort-hand for `tr.select(sel).createStream(opts)`.\n\n## tr.createReadStream(sel, opts)\n\nShort-hand for `tr.select(sel).createReadStream(opts)`.\n\n## tr.createWriteStream(sel, opts)\n\nShort-hand for `tr.select(sel).createWriteStream(opts)`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n* E[attr~=search]\n* E[attr|=prefix]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.5.6","dist":{"shasum":"eb645013b7e93594bfacef33d16e85c9eb8ce2ec","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.5.6.tgz"},"_from":".","_npmVersion":"1.3.7","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.6.0":{"name":"trumpet","version":"1.6.0","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## tr.createStream(sel, opts)\n\nShort-hand for `tr.select(sel).createStream(opts)`.\n\n## tr.createReadStream(sel, opts)\n\nShort-hand for `tr.select(sel).createReadStream(opts)`.\n\n## tr.createWriteStream(sel, opts)\n\nShort-hand for `tr.select(sel).createWriteStream(opts)`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n* E[attr~=search]\n* E[attr|=prefix]\n* E[attr^=prefix]\n* E[attr$=suffix]\n* E[attr*=search]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.6.0","dist":{"shasum":"b3733d6786868705e7a3d01f3f9d44794231453f","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.6.0.tgz"},"_from":".","_npmVersion":"1.3.7","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.6.1":{"name":"trumpet","version":"1.6.1","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## tr.createStream(sel, opts)\n\nShort-hand for `tr.select(sel).createStream(opts)`.\n\n## tr.createReadStream(sel, opts)\n\nShort-hand for `tr.select(sel).createReadStream(opts)`.\n\n## tr.createWriteStream(sel, opts)\n\nShort-hand for `tr.select(sel).createWriteStream(opts)`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n* E[attr~=search]\n* E[attr|=prefix]\n* E[attr^=prefix]\n* E[attr$=suffix]\n* E[attr*=search]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.6.1","dist":{"shasum":"2c87421b62c9cb3ff399aeb4a4271811be7b24c5","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.6.1.tgz"},"_from":".","_npmVersion":"1.3.7","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.6.2":{"name":"trumpet","version":"1.6.2","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## tr.createStream(sel, opts)\n\nShort-hand for `tr.select(sel).createStream(opts)`.\n\n## tr.createReadStream(sel, opts)\n\nShort-hand for `tr.select(sel).createReadStream(opts)`.\n\n## tr.createWriteStream(sel, opts)\n\nShort-hand for `tr.select(sel).createWriteStream(opts)`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n* E[attr~=search]\n* E[attr|=prefix]\n* E[attr^=prefix]\n* E[attr$=suffix]\n* E[attr*=search]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.6.2","dist":{"shasum":"d291a1d84ec2d7008c39e979904e018e19930903","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.6.2.tgz"},"_from":".","_npmVersion":"1.3.7","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}},"1.6.3":{"name":"trumpet","version":"1.6.3","description":"parse and transform streaming html using css selectors","main":"index.js","dependencies":{"sax":"~0.5.4","ent":"~0.0.5","through":"~2.3.4","duplexer":"~0.1.1","buffers":"~0.1.1","inherits":"~2.0.0"},"devDependencies":{"tap":"~0.4.0","tape":"~1.0.4","concat-stream":"~1.0.0"},"scripts":{"test":"tap test/*.js"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"keywords":["html","streaming","parser","transform","selectors","css"],"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"license":"MIT","engine":{"node":">=0.4"},"readme":"# trumpet\n\nparse and transform streaming html using css selectors\n\n[![build status](https://secure.travis-ci.org/substack/node-trumpet.png)](http://travis-ci.org/substack/node-trumpet)\n\n![trumpet](http://substack.net/images/trumpet.png)\n\n# example\n\n## table\n\ninput html:\n\n``` html\n<table>\n  <tbody>blah blah blah</tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\ntr.pipe(process.stdout);\n \nvar ws = tr.select('tbody').createWriteStream();\nws.end('<tr><td>rawr</td></tr>');\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/table.html').pipe(tr);\n```\n\noutput:\n\n``` html\n<table>\n  <tbody><tr><td>rawr</td></tr></tbody>\n  <tr><td>there</td></tr>\n  <tr><td>it</td></tr>\n  <tr><td>is</td></tr>\n</table>\n```\n\n## read all\n\ninput html:\n\n``` html\n<html>\n  <head>\n    <title>beep</title>\n  </head>\n  <body>\n    <div class=\"a\">¡¡¡</div>\n    <div class=\"b\">\n      <span>tacos</span>\n      <span> y </span>\n      <span>burritos</span>\n    </div>\n    <div class=\"a\">!!!</div>\n  </body>\n</html>\n```\n\n``` js\nvar trumpet = require('trumpet');\nvar tr = trumpet();\n\ntr.selectAll('.b span', function (span) {\n    span.createReadStream().pipe(process.stdout);\n});\n\nvar fs = require('fs');\nfs.createReadStream(__dirname + '/html/read_all.html').pipe(tr);\n```\n\noutput:\n\n``` html\ntacos y burritos\n```\n\n# methods\n\n``` js\nvar trumpet = require('trumpet')\n```\n\n## var tr = trumpet(opts)\n\nCreate a new trumpet stream. This stream is readable and writable.\nPipe an html stream into `tr` and get back a transformed html stream.\n\nParse errors are emitted by `tr` in an `'error'` event.\n\n## var elem = tr.select(selector)\n\nReturn a result object `elem` for the first element matching `selector`.\n\n## tr.selectAll(selector, function (elem) {})\n\nGet a result object `elem` for every element matching `selector`.\n\n## elem.getAttribute(name, cb)\n\nWhen the selector for `elem` matches, query the case-insensitive attribute\ncalled `name` with `cb(value)`.\n\n## elem.setAttribute(name, value)\n\nWhen the selector for `elem` matches, replace the case-insensitive attribute\ncalled `name` with `value`.\n\nIf the attribute doesn't exist, it will be created in the output stream.\n\n## elem.removeAttribute(name)\n\nWhen the selector for `elem` matches, remove the attribute called `name` if it\nexists.\n\n## elem.createReadStream(opts)\n\nCreate a new readable stream with the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createWriteStream(opts)\n\nCreate a new write stream to replace the inner html content under `elem`.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## elem.createStream(opts)\n\nCreate a new readable writable stream that outputs the content under `elem` and\nreplaces the content with the data written to it.\n\nTo use the outer html content instead of the inner, set `opts.outer` to `true`.\n\n## tr.createStream(sel, opts)\n\nShort-hand for `tr.select(sel).createStream(opts)`.\n\n## tr.createReadStream(sel, opts)\n\nShort-hand for `tr.select(sel).createReadStream(opts)`.\n\n## tr.createWriteStream(sel, opts)\n\nShort-hand for `tr.select(sel).createWriteStream(opts)`.\n\n# selector syntax\n\nPresently these [css selectors](http://www.w3.org/TR/CSS2/selector.html) work:\n\n* *\n* E\n* E F\n* E > F\n* E + F\n* E.class\n* E#id\n* E[attr=value]\n* E[attr~=search]\n* E[attr|=prefix]\n* E[attr^=prefix]\n* E[attr$=suffix]\n* E[attr*=search]\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install trumpet\n```\n\n# license\n\nMIT\n","readmeFilename":"readme.markdown","bugs":{"url":"https://github.com/substack/node-trumpet/issues"},"_id":"trumpet@1.6.3","dist":{"shasum":"ac75bb4110e0e64e52fa0aa7dd787fed50f9b8eb","tarball":"http://registry.npmjs.org/trumpet/-/trumpet-1.6.3.tgz"},"_from":".","_npmVersion":"1.3.7","_npmUser":{"name":"substack","email":"mail@substack.net"},"maintainers":[{"name":"substack","email":"mail@substack.net"}],"directories":{}}},"readme":null,"maintainers":[{"name":"substack","email":"mail@substack.net"}],"time":{"modified":"2013-12-28T05:12:39.135Z","created":"2012-03-11T23:59:45.800Z","0.0.0":"2012-03-11T23:59:47.342Z","0.1.0":"2012-03-12T06:51:06.836Z","0.1.1":"2012-03-12T06:51:29.232Z","0.2.0":"2012-03-12T06:57:33.799Z","0.2.1":"2012-03-12T08:05:04.333Z","0.2.2":"2012-03-12T12:31:11.444Z","0.2.3":"2012-03-13T03:03:47.966Z","0.2.4":"2012-03-17T17:38:01.707Z","0.2.5":"2012-05-25T01:56:47.813Z","0.2.6":"2012-05-25T03:01:59.730Z","0.2.7":"2012-05-25T05:08:40.903Z","0.3.0":"2012-05-26T08:50:42.925Z","0.3.1":"2013-01-02T02:46:03.767Z","0.3.2":"2013-05-09T07:34:31.999Z","0.3.3":"2013-05-09T08:21:27.608Z","0.3.4":"2013-05-13T17:54:57.584Z","0.3.5":"2013-05-14T06:45:37.386Z","0.3.6":"2013-05-19T07:55:07.399Z","0.4.0":"2013-05-24T00:51:21.873Z","0.4.1":"2013-06-04T09:02:40.986Z","0.4.2":"2013-06-06T04:45:50.976Z","1.0.0":"2013-06-19T12:56:47.196Z","1.1.0":"2013-06-22T12:30:35.212Z","1.2.0":"2013-06-22T13:31:12.349Z","1.2.1":"2013-06-23T03:20:08.266Z","1.2.2":"2013-07-01T05:13:20.030Z","1.2.3":"2013-07-01T05:38:21.535Z","1.3.0":"2013-07-06T00:28:02.511Z","1.3.1":"2013-07-06T00:32:37.832Z","1.4.0":"2013-07-06T22:58:38.894Z","1.4.1":"2013-07-07T00:06:14.008Z","1.5.0":"2013-07-07T23:08:25.167Z","1.5.1":"2013-07-10T08:27:32.933Z","1.5.2":"2013-07-10T08:37:08.533Z","1.5.3":"2013-07-10T09:11:34.790Z","1.5.4":"2013-07-10T09:31:54.799Z","1.5.5":"2013-07-30T22:37:53.750Z","1.5.6":"2013-08-26T01:50:36.883Z","1.6.0":"2013-08-27T02:40:05.543Z","1.6.1":"2013-09-06T09:14:04.056Z","1.6.2":"2013-09-14T13:15:52.768Z","1.6.3":"2013-11-13T03:11:27.189Z"},"author":{"name":"James Halliday","email":"mail@substack.net","url":"http://substack.net"},"repository":{"type":"git","url":"http://github.com/substack/node-trumpet.git"},"users":{"christopherdebeer":true,"michaelnisi":true,"awaterma":true,"pvorb":true,"phette23":true},"_attachments":{},"_etag":"\"1DMP5II5ABG3BEIPZZ3DC4E83\""}